# Development Workflow Configuration for Cost Patterns
# Integrates Trunk Based Development and versioning rules

development:
  workflow: "trunk_based"
  continuous_integration: true
  auto_deployment: true

branches:
  main:
    description: "Production-ready code, always deployable"
    protection: "strict"
    auto_deploy: false
    requires_tests: true
    requires_review: true

  dev:
    description: "Development environment branch, continuously deployed"
    protection: "standard"
    auto_deploy: true
    requires_tests: true
    requires_review: false

  release:
    description: "Release preparation branches"
    protection: "strict"
    auto_deploy: false
    requires_tests: true
    requires_review: true

  feature:
    description: "Feature development branches"
    protection: "standard"
    auto_deploy: false
    requires_tests: true
    requires_review: false

environments:
  development:
    url: "http://dev.forge-patterns.example.com"
    database: "development"
    monitoring: "enabled"

  production:
    url: "https://forge-patterns.example.com"
    database: "production"
    monitoring: "enabled"
    backups: "enabled"

versioning:
  strategy: "semantic"
  format: "MAJOR.MINOR.PATCH"
  
  files:
    - "package.json"
    - "pyproject.toml" 
    - "CHANGELOG.md"
  
  consistency_check: true
  auto_tagging: true
  
  pre_release_checklist:
    - "tests_passing"
    - "linting_passed"
    - "security_audit_passed"
    - "documentation_updated"
    - "changelog_updated"
    - "version_files_consistent"
    - "breaking_changes_documented"

commits:
  format: "angular_conventional"
  
  allowed_types:
    - "feat"
    - "fix" 
    - "docs"
    - "style"
    - "refactor"
    - "perf"
    - "test"
    - "chore"
    - "ci"
    - "build"
    - "revert"
  
  scopes:
    - "cost"
    - "monitoring"
    - "optimization"
    - "budget"
    - "analytics"
    - "free-tier"
    - "infrastructure"
  
  rules:
    subject_imperative: true
    subject_lowercase: true
    subject_max_length: 50
    no_trailing_period: true
    body_explain_what_why: true
    body_max_line_length: 72
    footer_reference_issues: true
    no_ai_attribution: true

pull_requests:
  branch_naming: "<type>/<scope>-short-desc"
  title_format: "same_as_commit_subject"
  
  checklist:
    - "tests_added_updated"
    - "build_passes"
    - "tests_pass"
    - "changelog_updated"
    - "readme_updated_if_behavior_changed"
  
  merge_strategy: "squash_or_rebase"
  no_direct_main_pushes: true

releases:
  tagging:
    format: "vX.Y.Z"
    type: "annotated"
    include_message: true
    protection: "signed"
  
  automation:
    triggers:
      - "tag_push"
      - "main_merge"
    
    changelog_generation: true
    github_release_creation: true
    version_consistency_check: true

cost_monitoring:
  integration:
    version_updates: true
    deployment_tracking: true
    cost_impact_analysis: true
    
  alerts:
    version_deployment_cost: true
    infrastructure_cost_changes: true
    free_tier_usage_alerts: true
    
  reporting:
    include_development_costs: true
    track_version_deployment_costs: true
    cost_optimization_impact: true
