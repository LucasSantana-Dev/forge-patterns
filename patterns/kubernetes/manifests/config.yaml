# Ingress Configuration
# External access routing for UIForge applications

apiVersion: networking.k8s.io/v1
kind: Ingress
metadata:
  name: uiforge-ingress
  labels:
    app: uiforge-app
  annotations:
    nginx.ingress.kubernetes.io/rewrite-target: /
    nginx.ingress.kubernetes.io/ssl-redirect: "false"
    nginx.ingress.kubernetes.io/force-ssl-redirect: "false"
    nginx.ingress.kubernetes.io/enable-cors: "true"
    nginx.ingress.kubernetes.io/cors-allow-origin: "*"
    nginx.ingress.kubernetes.io/cors-allow-methods: "GET, POST, PUT, DELETE, OPTIONS"
    nginx.ingress.kubernetes.io/cors-allow-headers: "DNT,User-Agent,X-Requested-With,If-Modified-Since,Cache-Control,Content-Type,Range,Authorization"
spec:
  ingressClassName: nginx
  rules:
    - host: uiforge.local
      http:
        paths:
          - path: /
            pathType: Prefix
            backend:
              service:
                name: uiforge-service
                port:
                  number: 80
    - host: api.uiforge.local
      http:
        paths:
          - path: /
            pathType: Prefix
            backend:
              service:
                name: uiforge-service
                port:
                  number: 80
---
# ConfigMap for Application Configuration
apiVersion: v1
kind: ConfigMap
metadata:
  name: uiforge-config
  labels:
    app: uiforge-app
data:
  app.json: |
    {
      "name": "UIForge Application",
      "version": "1.0.0",
      "environment": "production",
      "features": {
        "authentication": true,
        "monitoring": true,
        "caching": true
      },
      "database": {
        "host": "postgres-service",
        "port": "5432",
        "name": "uiforge_prod"
      },
      "redis": {
        "host": "redis-service",
        "port": "6379"
      }
    }
  logging.yaml: |
    level: info
    format: json
    outputs:
      - console
      - file
    file:
      path: /var/log/app.log
      max_size: 100MB
      max_files: 10
---
# Secret for Application Credentials
apiVersion: v1
kind: Secret
metadata:
  name: uiforge-secrets
  labels:
    app: uiforge-app
type: Opaque
data:
  # Base64 encoded values
  # Use: echo -n "value" | base64
  database-password: UkVQTEFDRV9XSVRIX1NUUk9OR19QQVNTV09SRA==
  jwt-secret: UkVQTEFDRV9XSVRIX0pXVF9TRUNSRVQ=
  api-key: UkVQTEFDRV9XSVRIX0FQSV9LRVk=
