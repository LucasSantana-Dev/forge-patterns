#!/bin/bash

# Forge Features CLI - Centralized Feature Management
# Controls features across all Forge projects (MCP Gateway, UIForge MCP, UIForge WebApp)

set -e

# Colors for output
RED='\033[0;31m'
GREEN='\033[0;32m'
YELLOW='\033[1;33m'
BLUE='\033[0;34m'
NC='\033[0m' # No Color

# Print functions
print_success() {
    echo -e "${GREEN}‚úÖ $1${NC}"
}

print_error() {
    echo -e "${RED}‚ùå $1${NC}"
}

print_warning() {
    echo -e "${YELLOW}‚ö†Ô∏è  $1${NC}"
}

print_info() {
    echo -e "${BLUE}‚ÑπÔ∏è  $1${NC}"
}

# Help function
show_help() {
    cat << 'EOF'
Forge Features CLI - Centralized Feature Management

USAGE:
    forge-features <command> [options]

COMMANDS:
    help                Show this help message
    list                List all available features

FEATURE NAMES:
    Global features: global.debug-mode, global.beta-features, global.experimental-ui
    MCP Gateway: mcp-gateway.rate-limiting, mcp-gateway.security-headers
    UIForge MCP: uiforge-mcp.ai-chat, uiforge-mcp.template-management
    UIForge WebApp: uiforge-webapp.dark-mode, uiforge-webapp.advanced-analytics

EXAMPLES:
    forge-features help
    forge-features list

Note: This is a simplified version for testing. Full CLI functionality requires Unleash server.
EOF
}

# List available features
list_features() {
    echo ""
    echo "üìã Available Features"
    echo "===================="
    echo ""
    echo "Global Features:"
    echo "  - global.debug-mode"
    echo "  - global.beta-features"
    echo "  - global.experimental-ui"
    echo "  - global.enhanced-logging"
    echo "  - global.maintenance-mode"
    echo ""
    echo "MCP Gateway Features:"
    echo "  - mcp-gateway.rate-limiting"
    echo "  - mcp-gateway.security-headers"
    echo "  - mcp-gateway.performance-monitoring"
    echo ""
    echo "UIForge MCP Features:"
    echo "  - uiforge-mcp.ai-chat"
    echo "  - uiforge-mcp.template-management"
    echo "  - uiforge-mcp.ui-generation"
    echo ""
    echo "UIForge WebApp Features:"
    echo "  - uiforge-webapp.dark-mode"
    echo "  - uiforge-webapp.advanced-analytics"
    echo ""
    echo "Note: Use forge-features enable/disable commands when Unleash server is running."
}

# Main script logic
case "${1:-}" in
    "help"|"--help"|"-h")
        show_help
        ;;
    "list")
        list_features
        ;;
    "")
        print_error "Command required"
        echo "Use 'forge-features help' for usage information"
        exit 1
        ;;
    *)
        print_error "Unknown command: $1"
        echo "Use 'forge-features help' for usage information"
        exit 1
        ;;
esac
